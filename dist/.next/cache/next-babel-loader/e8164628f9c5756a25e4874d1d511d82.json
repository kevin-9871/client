{"ast":null,"code":"import env from 'src/env';\nimport { message } from 'antd';\nexport function beforeAvatarUpload(file) {\n  var ext = file.name.split('.').pop().toLowerCase();\n  var isImageAccept = env.imageAccept.split(',').map(function (item) {\n    return item.trim();\n  }).indexOf(\".\".concat(ext));\n\n  if (isImageAccept === -1) {\n    message.error(\"You can only upload \".concat(env.imageAccept, \" file!\"));\n    return false;\n  }\n\n  var isLt2M = file.size / 1024 / 1024 < (env.maximumSizeUploadAvatar || 2);\n\n  if (!isLt2M) {\n    message.error(\"Image must smaller than \".concat(env.maximumSizeUploadAvatar || 2, \"MB!\"));\n    return false;\n  }\n\n  return true;\n}","map":{"version":3,"sources":["/Users/frag-games/Desktop/Test Projects/secret-client/src/lib/file.ts"],"names":["env","message","beforeAvatarUpload","file","ext","name","split","pop","toLowerCase","isImageAccept","imageAccept","map","item","trim","indexOf","error","isLt2M","size","maximumSizeUploadAvatar"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,SAAhB;AACA,SAASC,OAAT,QAAwB,MAAxB;AAGA,OAAO,SAASC,kBAAT,CAA4BC,IAA5B,EAAmD;AACxD,MAAMC,GAAG,GAAGD,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqBC,GAArB,GAA2BC,WAA3B,EAAZ;AACA,MAAMC,aAAa,GAAGT,GAAG,CAACU,WAAJ,CACnBJ,KADmB,CACb,GADa,EAEnBK,GAFmB,CAEf,UAACC,IAAD;AAAA,WAAkBA,IAAI,CAACC,IAAL,EAAlB;AAAA,GAFe,EAGnBC,OAHmB,YAGPV,GAHO,EAAtB;;AAIA,MAAIK,aAAa,KAAK,CAAC,CAAvB,EAA0B;AACxBR,IAAAA,OAAO,CAACc,KAAR,+BAAqCf,GAAG,CAACU,WAAzC;AACA,WAAO,KAAP;AACD;;AAED,MAAMM,MAAM,GAAGb,IAAI,CAACc,IAAL,GAAY,IAAZ,GAAmB,IAAnB,IAA2BjB,GAAG,CAACkB,uBAAJ,IAA+B,CAA1D,CAAf;;AACA,MAAI,CAACF,MAAL,EAAa;AACXf,IAAAA,OAAO,CAACc,KAAR,mCAC6Bf,GAAG,CAACkB,uBAAJ,IAA+B,CAD5D;AAGA,WAAO,KAAP;AACD;;AAED,SAAO,IAAP;AACD","sourcesContent":["import env from 'src/env';\nimport { message } from 'antd';\nimport { RcFile } from 'antd/lib/upload';\n\nexport function beforeAvatarUpload(file: RcFile): boolean {\n  const ext = file.name.split('.').pop().toLowerCase();\n  const isImageAccept = env.imageAccept\n    .split(',')\n    .map((item: string) => item.trim())\n    .indexOf(`.${ext}`);\n  if (isImageAccept === -1) {\n    message.error(`You can only upload ${env.imageAccept} file!`);\n    return false;\n  }\n\n  const isLt2M = file.size / 1024 / 1024 < (env.maximumSizeUploadAvatar || 2);\n  if (!isLt2M) {\n    message.error(\n      `Image must smaller than ${env.maximumSizeUploadAvatar || 2}MB!`\n    );\n    return false;\n  }\n\n  return true;\n}\n"]},"metadata":{},"sourceType":"module"}