{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport './primary-layout.less';\nimport * as React from 'react';\nimport { Layout, BackTop, Row, Col, Button, Space } from 'antd';\nimport Head from 'next/head';\nimport { connect } from 'react-redux';\nimport Router from 'next/router';\nimport { loadUIValue } from 'src/redux/ui/actions';\nimport Header from '@components/common/layout/header';\nimport Loader from '@components/common/base/loader';\nimport { GlobalOutlined // RollbackOutlined,\n, UserOutlined, SettingOutlined, MessageOutlined, HeartOutlined, OrderedListOutlined, PieChartOutlined, LineChartOutlined, SolutionOutlined, CalendarOutlined } from '@ant-design/icons'; // import { SiderMenu } from '@components/common/layout/menu';\n\nimport { FundsIcon, PaymentTokensHistoryIcon, TransactionHistoryIcon, PurchasedImageIcon, PurchasedItemIcon, PurchasedVideoIcon, MyProductIcon, VideosIcon, PhotosIcon, EarningIcon, PayoutRequestIcon, Group } from '@components/common/base/icons';\nimport dynamic from 'next/dynamic';\nimport { converDuration, createSelector } from 'src/lib';\nimport Footer from '@components/common/layout/footer';\nconst SiderMenuNoSSR = dynamic(() => import('@components/common/layout/menu'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('@components/common/layout/menu')],\n    modules: ['@components/common/layout/menu']\n  }\n});\nconst userSettingMenu = [{\n  id: 'account-settings',\n  name: 'Account Settings',\n  route: '/account/user/account-settings',\n  icon: __jsx(SettingOutlined, null)\n}, {\n  id: 'messages',\n  name: 'Messages',\n  route: '/messages',\n  icon: __jsx(MessageOutlined, null)\n}, {\n  id: 'favorites',\n  name: 'My favorites',\n  route: '/account/user/favorites',\n  icon: __jsx(HeartOutlined, null)\n}, {\n  id: 'funds-tokens',\n  name: 'Funds / Tokens',\n  route: '/account/user/funds-tokens',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(FundsIcon, null))\n}, {\n  id: 'transaction-history',\n  name: 'Transaction History',\n  route: '/account/user/transaction-history',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(TransactionHistoryIcon, null))\n}, {\n  id: 'payment-token-history',\n  name: 'Payment Tokens History',\n  route: '/account/user/payment-token-history',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PaymentTokensHistoryIcon, null))\n}, {\n  id: 'order',\n  name: 'My orders',\n  route: '/account/user/orders',\n  icon: __jsx(OrderedListOutlined, null)\n}, {\n  id: 'purchased-galleries',\n  name: 'Purchased Galleries',\n  route: '/account/user/purchased-gallery',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PurchasedImageIcon, null))\n}, {\n  id: 'purchased-videos',\n  name: 'Purchased Videos',\n  route: '/account/user/purchased-video',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PurchasedVideoIcon, null))\n}, {\n  id: 'purchased-products',\n  name: 'Purchased Products',\n  route: '/account/user/purchased-product',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PurchasedItemIcon, null))\n} // {\n//   id: 'refund-request',\n//   name: 'Refund Requests',\n//   route: '/account/user/refund-request',\n//   icon: <RollbackOutlined />\n// }\n];\nconst performerSettingMenu = [{\n  id: 'profile',\n  name: 'Profile',\n  route: '/account/performer/profile',\n  icon: __jsx(UserOutlined, null)\n}, {\n  id: 'account-settings',\n  name: 'Account Settings',\n  route: '/account/performer/account-settings',\n  icon: __jsx(SettingOutlined, null)\n}, {\n  id: 'messages',\n  name: 'Messages',\n  route: '/messages',\n  icon: __jsx(MessageOutlined, null)\n}, {\n  id: 'earning',\n  name: 'Earnings',\n  route: '/account/performer/earning',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(EarningIcon, null))\n}, {\n  id: 'schedules',\n  name: 'Schedules',\n  route: '/account/performer/schedules',\n  icon: __jsx(CalendarOutlined, null)\n}, {\n  id: 'my-products',\n  name: 'Products',\n  route: '/account/performer/products',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(MyProductIcon, null))\n}, {\n  id: 'my-videos',\n  name: 'Videos',\n  route: '/account/performer/videos',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(VideosIcon, null))\n}, {\n  id: 'my-galleries',\n  name: 'Galleries',\n  route: '/account/performer/galleries',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PhotosIcon, null))\n}, {\n  id: 'my-blocking',\n  name: 'Blocking',\n  route: '/account/performer/geo-block',\n  icon: __jsx(GlobalOutlined, null)\n}, {\n  id: 'payout-request',\n  name: 'Payout Request',\n  route: '/account/performer/payout-requests',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PayoutRequestIcon, null))\n}, {\n  id: 'order',\n  name: 'Orders',\n  route: '/account/performer/orders',\n  icon: __jsx(OrderedListOutlined, null)\n}];\nconst studioSettingMenu = [{\n  id: 'account-settings',\n  name: 'Account Settings',\n  route: '/studio/account-settings',\n  icon: __jsx(SettingOutlined, null)\n}, {\n  id: 'earning',\n  name: 'Earnings',\n  route: '/studio/earning',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(EarningIcon, null))\n}, {\n  id: 'commission',\n  name: 'Commission',\n  route: '/studio/commissions',\n  icon: __jsx(PieChartOutlined, null)\n}, {\n  id: 'models',\n  name: 'Models',\n  route: '/studio/models',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(Group, null))\n}, {\n  id: 'studio-payout-requests',\n  name: 'Payout Requests',\n  route: '/studio/payout-requests',\n  icon: __jsx(\"span\", {\n    className: \"anticon\"\n  }, __jsx(PayoutRequestIcon, null))\n}, {\n  id: 'studioperformer-requests',\n  name: 'Performer Payout Requests',\n  route: '/studio/payout-requests/performer-requests',\n  icon: __jsx(SolutionOutlined, null)\n}, {\n  id: 'performer-stats',\n  name: 'Performer Stats',\n  route: '/studio/models/stats',\n  icon: __jsx(LineChartOutlined, null)\n}];\n\nclass PrimaryLayout extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"enquireHandler\", void 0);\n\n    _defineProperty(this, \"onLive\", () => {\n      Router.push('/live');\n    });\n\n    this.state = {\n      // security request for primary layout\n      routerChange: false\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      loadUIValue: dispatchLoadUIValue\n    } = this.props;\n    dispatchLoadUIValue();\n    false && this.handleStateChange();\n  }\n\n  handleStateChange() {\n    Router.events.on('routeChangeStart', () => this.setState({\n      routerChange: true\n    }));\n    Router.events.on('routeChangeComplete', () => this.setState({\n      routerChange: false\n    }));\n  }\n\n  render() {\n    const {\n      children,\n      collapsed,\n      fixedHeader,\n      logo,\n      currentUser,\n      totalNotReadMessage,\n      // siteName,\n      theme\n    } = this.props;\n    const {\n      routerChange\n    } = this.state;\n    const headerProps = {\n      logo,\n      collapsed,\n      theme\n    };\n    return __jsx(Layout, null, __jsx(Head, null, __jsx(\"link\", {\n      href: \"https://unpkg.com/video.js@7.8.3/dist/video-js.css\",\n      rel: \"stylesheet\"\n    }), __jsx(\"script\", {\n      src: \"https://unpkg.com/video.js@7.8.3/dist/video.js\"\n    }), __jsx(\"script\", {\n      src: \"https://unpkg.com/@videojs/http-streaming@1.13.3/dist/videojs-http-streaming.js\"\n    })), __jsx(\"div\", {\n      className: \"container\",\n      style: {\n        paddingTop: fixedHeader ? 72 : 0\n      },\n      id: \"primaryLayout\"\n    }, __jsx(Header, headerProps), __jsx(Layout.Content, {\n      className: \"content\",\n      style: {\n        position: 'relative'\n      }\n    }, routerChange && __jsx(Loader, {\n      spinning: true,\n      fullScreen: true\n    }), __jsx(Row, {\n      gutter: 10,\n      style: {\n        minHeight: '100%'\n      },\n      className: \"primary-content\"\n    }, __jsx(Col, {\n      xs: 24,\n      sm: 4\n    }, (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) && (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'performer' && __jsx(Space, {\n      direction: \"vertical\",\n      style: {\n        width: '100%'\n      }\n    }, __jsx(Button, {\n      type: \"primary\",\n      className: \"btn-live\",\n      onClick: this.onLive.bind(this)\n    }, \"Go Live\"), __jsx(SiderMenuNoSSR, {\n      menus: performerSettingMenu,\n      totalNotReadMessage: totalNotReadMessage\n    })), (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) && (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'user' && __jsx(SiderMenuNoSSR, {\n      menus: userSettingMenu,\n      totalNotReadMessage: totalNotReadMessage\n    }), (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) && (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === 'studio' && __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"tk-studio\"\n    }, __jsx(\"div\", {\n      className: \"stat\"\n    }, __jsx(\"span\", null, \"Total models\"), __jsx(\"span\", null, currentUser.stats.totalPerformer || 0)), __jsx(\"div\", {\n      className: \"stat\"\n    }, __jsx(\"span\", null, \"Total earned\"), __jsx(\"span\", null, currentUser.stats.totalTokenEarned || 0)), __jsx(\"div\", {\n      className: \"stat\"\n    }, __jsx(\"span\", null, \"Total sessions\"), __jsx(\"span\", null, currentUser.stats.totalOnlineToday || 0)), __jsx(\"div\", {\n      className: \"stat\"\n    }, __jsx(\"span\", null, \"Total hours online\"), __jsx(\"span\", null, currentUser.stats.totalHoursOnline && converDuration(currentUser.stats.totalHoursOnline)))), __jsx(SiderMenuNoSSR, {\n      menus: studioSettingMenu // totalNotReadMessage={totalNotReadMessage}\n\n    }))), __jsx(Col, {\n      xs: 24,\n      sm: 20\n    }, children)), __jsx(Footer, null)), __jsx(BackTop, {\n      className: \"backTop\",\n      target: () => document.querySelector('#primaryLayout')\n    })));\n  }\n\n}\n\nconst userSelecter = state => state.user.current;\n\nconst performerSelecter = state => state.performer.current;\n\nconst studioSelecter = state => state.studio.current;\n\nconst authSelecter = state => state.auth;\n\nconst currentUserSelecter = createSelector(userSelecter, performerSelecter, studioSelecter, authSelecter, (user, performer, studio, auth) => {\n  if (!auth.loggedIn) return {};\n\n  if (user !== null && user !== void 0 && user._id) {\n    return _objectSpread(_objectSpread({}, user), {}, {\n      role: 'user'\n    });\n  }\n\n  if (performer !== null && performer !== void 0 && performer._id) {\n    return _objectSpread(_objectSpread({}, performer), {}, {\n      role: 'performer'\n    });\n  }\n\n  if (studio !== null && studio !== void 0 && studio._id) {\n    return _objectSpread(_objectSpread({}, studio), {}, {\n      role: 'studio'\n    });\n  }\n\n  return {};\n});\n\nconst mapStateToProps = state => _objectSpread(_objectSpread(_objectSpread({}, state.ui), state.auth), {}, {\n  totalNotReadMessage: state.message.totalNotReadMessage,\n  currentUser: currentUserSelecter(state)\n});\n\nconst mapDispatchToProps = {\n  loadUIValue\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(PrimaryLayout);","map":null,"metadata":{},"sourceType":"module"}