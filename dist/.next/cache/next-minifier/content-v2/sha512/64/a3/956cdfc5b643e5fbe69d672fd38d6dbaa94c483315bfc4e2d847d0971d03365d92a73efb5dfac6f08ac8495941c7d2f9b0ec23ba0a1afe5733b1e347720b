{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[107],{\"/kpp\":function(e,t,n){\"use strict\";var r=n(\"rePB\"),a=n(\"wx14\"),o=n(\"U8pU\"),i=n(\"q1tI\"),s=n(\"TSYQ\"),c=n.n(s),u=n(\"o/2+\"),l=n(\"H84U\"),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var f=[\"xs\",\"sm\",\"md\",\"lg\",\"xl\",\"xxl\"],p=i.forwardRef((function(e,t){var n,s=i.useContext(l.b),p=s.getPrefixCls,b=s.direction,h=i.useContext(u.a),v=h.gutter,m=h.wrap,O=h.supportFlexGap,g=e.prefixCls,y=e.span,E=e.order,R=e.offset,j=e.push,S=e.pull,_=e.className,M=e.children,C=e.flex,P=e.style,T=d(e,[\"prefixCls\",\"span\",\"order\",\"offset\",\"push\",\"pull\",\"className\",\"children\",\"flex\",\"style\"]),w=p(\"col\",g),I={};f.forEach((function(t){var n,i={},s=e[t];\"number\"===typeof s?i.span=s:\"object\"===Object(o.a)(s)&&(i=s||{}),delete T[t],I=Object(a.a)(Object(a.a)({},I),(n={},Object(r.a)(n,\"\".concat(w,\"-\").concat(t,\"-\").concat(i.span),void 0!==i.span),Object(r.a)(n,\"\".concat(w,\"-\").concat(t,\"-order-\").concat(i.order),i.order||0===i.order),Object(r.a)(n,\"\".concat(w,\"-\").concat(t,\"-offset-\").concat(i.offset),i.offset||0===i.offset),Object(r.a)(n,\"\".concat(w,\"-\").concat(t,\"-push-\").concat(i.push),i.push||0===i.push),Object(r.a)(n,\"\".concat(w,\"-\").concat(t,\"-pull-\").concat(i.pull),i.pull||0===i.pull),Object(r.a)(n,\"\".concat(w,\"-rtl\"),\"rtl\"===b),n))}));var A=c()(w,(n={},Object(r.a)(n,\"\".concat(w,\"-\").concat(y),void 0!==y),Object(r.a)(n,\"\".concat(w,\"-order-\").concat(E),E),Object(r.a)(n,\"\".concat(w,\"-offset-\").concat(R),R),Object(r.a)(n,\"\".concat(w,\"-push-\").concat(j),j),Object(r.a)(n,\"\".concat(w,\"-pull-\").concat(S),S),n),_,I),x={};if(v&&v[0]>0){var k=v[0]/2;x.paddingLeft=k,x.paddingRight=k}if(v&&v[1]>0&&!O){var N=v[1]/2;x.paddingTop=N,x.paddingBottom=N}return C&&(x.flex=function(e){return\"number\"===typeof e?\"\".concat(e,\" \").concat(e,\" auto\"):/^\\d+(\\.\\d+)?(px|em|rem|%)$/.test(e)?\"0 0 \".concat(e):e}(C),\"auto\"!==C||!1!==m||x.minWidth||(x.minWidth=0)),i.createElement(\"div\",Object(a.a)({},T,{style:Object(a.a)(Object(a.a)({},x),P),className:A,ref:t}),M)}));p.displayName=\"Col\",t.a=p},\"8Skl\":function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z\"}}]},name:\"down\",theme:\"outlined\"},o=n(\"6VBw\"),i=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"DownOutlined\";t.a=r.forwardRef(i)},BMrR:function(e,t,n){\"use strict\";var r=n(\"qrJ5\");t.a=r.a},Dx9A:function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"defs\",attrs:{},children:[{tag:\"style\",attrs:{}}]},{tag:\"path\",attrs:{d:\"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z\"}}]},name:\"send\",theme:\"outlined\"},o=n(\"6VBw\"),i=function(e,t){return r.createElement(o.a,Object.assign({},e,{ref:t,icon:a}))};i.displayName=\"SendOutlined\";t.a=r.forwardRef(i)},HQdG:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return M}));var r=n(\"o0o1\"),a=n.n(r),o=n(\"HaE+\"),i=n(\"wx14\"),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"JX7q\"),l=n(\"Ji7U\"),d=n(\"md7G\"),f=n(\"foSv\"),p=n(\"rePB\"),b=n(\"q1tI\"),h=n.n(b),v=n(\"nOHt\"),m=n.n(v),O=n(\"fsrY\"),g=n(\"tsqr\"),y=n(\"XwMy\"),E=n(\"MoJi\"),R=h.a.createElement;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function M(e){var t=function(t){Object(l.a)(r,t);var n=_(r);function r(e){var t;Object(s.a)(this,r),t=n.call(this,e),Object(p.a)(Object(u.a)(t),\"webRTCAdaptor\",void 0),Object(p.a)(Object(u.a)(t),\"autoRepublishIntervalJob\",void 0),Object(p.a)(Object(u.a)(t),\"onbeforeunload\",(function(){t.leaveSession()}));var a=t.props.sessionId;return t.state={initialized:!1,publish_started:!1,isMicMuted:!1,streamId:a},t}return Object(c.a)(r,[{key:\"componentDidMount\",value:function(){this.props.initImmediately&&this.initWebRTCAdaptor(),m.a.events.on(\"routeChangeStart\",this.onbeforeunload)}},{key:\"componentWillUnmount\",value:function(){m.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"leaveSession\",value:function(){var e=this.state,t=e.streamId,n=e.initialized,r=this.props.configs.isPlayMode;this.autoRepublishIntervalJob&&window.clearInterval(this.autoRepublishIntervalJob),this.webRTCAdaptor&&(t&&(this.webRTCAdaptor.stop(t),this.webRTCAdaptor.closePeerConnection(t),r||this.webRTCAdaptor.closeStream(t)),n&&this.webRTCAdaptor.closeWebSocket(),this.webRTCAdaptor=void 0),this.setState({streamId:\"\",initialized:!1,isMicMuted:!1})}},{key:\"initWebRTCAdaptor\",value:function(e,t){var n=this,r=this.props,a=r.configs,o=r.settings,i=r.autoRepublishDisabled,s=r.callback,c=a.isPlayMode,u=y.a.debug,l=c?o[O.a.SUBSCRIBER_URL]:o[O.a.PUBLISHER_URL];if(l){if(this.webRTCAdaptor||!i){var d=a.appName||o.AntMediaAppname,f=\"\".concat(l,\"/\").concat(d,\"/websocket\"),p=\"ws://\".concat(f);window.location.protocol.startsWith(\"https\")&&(p=\"wss://\".concat(f)),this.setState({cb:e,cbError:t}),this.webRTCAdaptor=new window.WebRTCAdaptor(S(S({websocket_url:p,mediaConstraints:{video:!0,audio:!0},debug:u,peerconnection_config:{iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},sdp_constraints:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},bandwidth:y.a.maxVideoBitrateKbps,isPlayMode:!1},a),{},{callback:function(t,r){if(\"initialized\"===t)n.setState({initialized:!0});else if(\"publish_started\"===t)n.setState({publish_started:!0,streamId:r.streamId}),n.autoRepublishIntervalJob||i||(n.autoRepublishIntervalJob=setInterval(n.checkAndRepublishIfRequired.bind(n),5e3));else if(\"publish_finished\"===t)n.setState({publish_started:!1,streamId:\"\"});else if(t===E.a.ICE_CONNECTION_STATE_CHANGED)n.setState({iceConnectionState:r.state});else if(t===E.a.REFRESH_CONNECTION){n.state.publish_started&&!i&&n.checkAndRepublishIfRequired()}else t===E.a.CLOSED&&\"undefined\"!==typeof r&&console.log(\"Connecton closed: \".concat(JSON.stringify(r)));s&&\"function\"===typeof s&&s(t,r),e&&\"function\"===typeof e&&e(t,r)},callbackError:function(e,r){t&&\"function\"===typeof t&&t(e,r),n.callbackError(e,r,{websocketURL:p})}}))}}else g.b.error(\"Undefined WebsocketURL!\")}},{key:\"checkAndRepublishIfRequired\",value:function(){try{var e=this.state,t=e.streamId,n=e.cb,r=e.cbError;if(!this.webRTCAdaptor||!t)return;var a=this.webRTCAdaptor.iceConnectionState(t);null!=a&&\"failed\"!==a&&\"disconnected\"!==a||(console.error(\"Publish has stopped and will try to re-publish\"),this.webRTCAdaptor.stop(t),this.webRTCAdaptor.closePeerConnection(t),this.webRTCAdaptor.closeWebSocket(),this.initWebRTCAdaptor(n,r))}catch(o){console.error(\"error republish\",o)}}},{key:\"callbackError\",value:function(e,t,n){console.error(\"error callback: \".concat(JSON.stringify(e)));var r=n.websocketURL;if(\"string\"===typeof t)return console.error(\"error message:\",t),void g.b.error(t,3);var a=JSON.stringify(e);-1===a.indexOf(\"noStreamNameSpecified\")?(-1!==a.indexOf(\"NotFoundError\")?a=\"Camera or Mic are not found or not allowed in your device\":-1!==a.indexOf(\"NotReadableError\")||-1!==a.indexOf(\"TrackStartError\")?a=\"Camera or Mic is being used by some other process that does not let read the devices\":-1!==a.indexOf(\"OverconstrainedError\")||-1!==a.indexOf(\"ConstraintNotSatisfiedError\")?a=\"There is no device found that fits your video and audio constraints. You may change video and audio constraints\":-1!==a.indexOf(\"NotAllowedError\")||-1!==a.indexOf(\"PermissionDeniedError\")?a=\"You are not allowed to access camera and mic.\":-1!==a.indexOf(\"TypeError\")?a=\"Video/Audio is required\":-1!==a.indexOf(\"ScreenSharePermissionDenied\")?a=\"You are not allowed to access screen share\":-1!==a.indexOf(\"WebSocketNotConnected\")?a=\"WebRTCAdaptor Connection is disconnected\":-1!==a.indexOf(\"unauthorized_access\")?a=\"Access Denied. You don\\u2019t have permission to access\":-1!==a.indexOf(\"streamIdInUse\")?a=\"Stream have been already published. Please close the previous connection.\":-1!==a.indexOf(\"publishTimeoutError\")?a=\"WebRTC Publishing Timeout Error\":-1!==a.indexOf(\"not_allowed_unregistered_streams\")?a=\"Stream with an unregistered id is not allowed\":-1!==a.indexOf(\"UnsecureContext\")?a=\"Fatal Error: Browser cannot access camera and mic because of unsecure context. Please install SSL and access via https\":-1!==a.indexOf(\"WebSocketNotSupported\")?a=\"Fatal Error: WebSocket not supported in this browser\":-1!==a.indexOf(\"AudioAlreadyActive\")?a=\"AudioAlreadyActive\":-1!==a.indexOf(\"isTrusted\")?(a=\"WebSocket connection to \".concat(r,\" failed\"),window.location.reload()):a=\"WebRTCAdaptor Connection Error\",a&&g.b.error(a,3)):console.warn(a)}},{key:\"muteLocalMic\",value:function(){this.webRTCAdaptor&&(this.webRTCAdaptor.muteLocalMic(),this.setState({isMicMuted:!0}),g.b.success(\"Muted local mic successfully\"))}},{key:\"unmuteLocalMic\",value:function(){this.webRTCAdaptor&&(this.webRTCAdaptor.unmuteLocalMic(),this.setState({isMicMuted:!1}),g.b.success(\"Unmuted local mic successfully\"))}},{key:\"render\",value:function(){var t=this.props.forwardedRef;return R(e,Object(i.a)({},this.props,this.state,{webRTCAdaptor:this.webRTCAdaptor,initWebRTCAdaptor:this.initWebRTCAdaptor.bind(this),muteLocalMic:this.muteLocalMic.bind(this),unmuteLocalMic:this.unmuteLocalMic.bind(this),leaveSession:this.leaveSession.bind(this),ref:t}))}}],[{key:\"getInitialProps\",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.getInitialProps,!t.t0){t.next=5;break}return t.next=4,e.getInitialProps(n);case 4:t.t0=t.sent;case 5:return r=t.t0,t.abrupt(\"return\",S({},r));case 7:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),r}(h.a.Component);return h.a.forwardRef((function(e,n){return R(t,Object(i.a)({},e,{forwardedRef:n}))}))}},KSuR:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return v}));var r=n(\"1OyB\"),a=n(\"vuIU\"),o=n(\"JX7q\"),i=n(\"ReuC\"),s=n(\"Ji7U\"),c=n(\"md7G\"),u=n(\"foSv\"),l=n(\"rePB\"),d=n(\"8OJ3\");function f(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var p=function(e){Object(s.a)(n,e);var t=f(n);function n(e,a){var i;if(Object(r.a)(this,n),i=t.call(this,e,a),Object(l.a)(Object(o.a)(i),\"initialized\",!1),Object(l.a)(Object(o.a)(i),\"isMicMuted\",!1),Object(l.a)(Object(o.a)(i),\"_options\",void 0),i._options=a,\"undefined\"!==typeof i._options.isMicMuted&&(i.isMicMuted=i._options.isMicMuted),e.readyState()){i.initialized=!0;var s=i.isMicMuted?\"Unmute Local Mic\":\"Mute Local Mic\";i.controlText(s)}return i.on(e,\"timeupdate\",(function(){i.initialized&&i.update()})),i}return Object(a.a)(n,[{key:\"update\",value:function(){}},{key:\"buildCSSClass\",value:function(){return\"vjs-audio  \".concat(Object(i.a)(Object(u.a)(n.prototype),\"buildCSSClass\",this).call(this))}},{key:\"handleClick\",value:function(){var e=this._options,t=e.muteLocalMic,n=e.unmuteLocalMic;if(this.initialized){document.querySelector(\".vjs-audio\").classList.toggle(\"vjs-audio-off\");var r=\"\";this.isMicMuted?(n(),r=\"Mute Local Mic\"):(t(),r=\"Unmute Local Mic\"),this.controlText()!==r&&this.controlText(r),this.isMicMuted=!this.isMicMuted}}}]),n}(d.a.getComponent(\"Button\"));d.a.registerComponent(\"AudioMuteToggleButton\",p);var b=p;function h(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(s.a)(n,e);var t=h(n);function n(e,a){var i;return Object(r.a)(this,n),i=t.call(this,e,a),Object(l.a)(Object(o.a)(i),\"muteTogglesButton\",void 0),i.muteTogglesButton=new b(i.player,a),i.player.controlBar.addChild(i.muteTogglesButton,{componentClass:\"muteToggleButton\"}),i}return Object(a.a)(n,[{key:\"dispose\",value:function(){Object(i.a)(Object(u.a)(n.prototype),\"dispose\",this).call(this)}}]),n}(d.a.getPlugin(\"plugin\"))},\"L/eJ\":function(e,t,n){\"use strict\";var r,a=n(\"ZTPi\"),o=n(\"q1tI\"),i=n.n(o),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"Ji7U\"),l=n(\"md7G\"),d=n(\"foSv\"),f=n(\"TSYQ\"),p=n.n(f),b=(n(\"OVUx\"),n(\"/MKj\")),h=n(\"gxiY\"),v=n(\"o0o1\"),m=n.n(v),O=n(\"HaE+\"),g=n(\"JX7q\"),y=n(\"rePB\"),E=n(\"wd/R\"),R=n.n(E),j=n(\"YFqc\"),S=n.n(j),_=(n(\"UTbA\"),n(\"AY7M\")),M=n(\"nOHt\"),C=n.n(M),P=n(\"tsqr\"),T=n(\"5rEg\"),w=n(\"Dx9A\"),I=n(\"a6RD\"),A=n.n(I),x=(n(\"qMfs\"),i.a.createElement);function k(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}r=A()((function(){return n.e(54).then(n.t.bind(null,\"x/1y\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"x/1y\"]},modules:[\"emoji-picker-react\"]}});var N=function(e){Object(u.a)(n,e);var t=k(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(y.a)(Object(g.a)(r),\"uploadRef\",void 0),r.uploadRef=i.a.createRef(),r}return Object(c.a)(n,[{key:\"onEmojiClick\",value:function(e,t){var n=this.props.onEmojiClick;n(t)}},{key:\"render\",value:function(){return x(i.a.Fragment,null,x(r,{onEmojiClick:this.onEmojiClick.bind(this),disableAutoFocus:!0,disableSearchBar:!0,disableSkinTonePicker:!0}))}}]),n}(o.PureComponent),L=i.a.createElement;function D(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var U=function(e){Object(u.a)(n,e);var t=D(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(y.a)(Object(g.a)(r),\"uploadRef\",void 0),Object(y.a)(Object(g.a)(r),\"_input\",void 0),Object(y.a)(Object(g.a)(r),\"state\",{text:\"\"}),Object(y.a)(Object(g.a)(r),\"onKeyDown\",(function(e){13===e.keyCode&&r.send()})),Object(y.a)(Object(g.a)(r),\"onChange\",(function(e){r.setText(e.target.value)})),Object(y.a)(Object(g.a)(r),\"onEmojiClick\",(function(e){var t=r.state.text;r.setText(t+e.emoji)})),r.uploadRef=i.a.createRef(),r}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){this.uploadRef||(this.uploadRef=i.a.createRef()),this._input||(this._input=i.a.createRef())}},{key:\"componentDidUpdate\",value:function(e){this.props.sendMessage.success!==e.sendMessage.success&&(this.setText(\"\"),this._input&&this._input.focus())}},{key:\"setText\",value:function(e){this.setState({text:e})}},{key:\"send\",value:function(){var e=this.state.text;if(this.props.loggedIn){if(e){var t=this.props,n=t.conversation,r=t.isPublic;(0,t.sendStreamMessage)({conversationId:n._id,data:{text:e},type:n.type,isPublic:r})}}else P.b.error(\"Please login\")}},{key:\"render\",value:function(){var e=this,t=this.props.loggedIn,n=this.state.text,r=this.props,a=r.sendMessage,o=r.conversation;return this.uploadRef||(this.uploadRef=i.a.createRef()),this._input||(this._input=i.a.createRef()),L(\"div\",{className:\"compose\",hidden:!t||!o._id},L(T.a,{value:n,className:\"compose-input\",placeholder:\"Enter message here.\",onKeyDown:this.onKeyDown,onChange:this.onChange,disabled:a.sending,autoFocus:!0,ref:function(t){return e._input=t}}),L(\"div\",{className:\"grp-icons\"},L(w.a,{onClick:this.send.bind(this),style:{fontSize:\"25px\",marginRight:\"10px\",color:\"#fe26b3\"}}),L(\"div\",{className:\"grp-emotions\"},L(\"img\",{src:\"/emotion-ico.png\",width:\"25px\",alt:\"\"}),L(N,{onEmojiClick:this.onEmojiClick.bind(this)}))))}}]),n}(o.PureComponent),B={sendStreamMessage:h.m},F=Object(b.b)((function(e){return{loggedIn:e.auth.loggedIn,sendMessage:e.streamMessage.sendMessage}}),B)(U),G=n(\"+YFz\"),H={icon:function(e,t){return{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z\",fill:t}},{tag:\"path\",attrs:{d:\"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z\",fill:t}},{tag:\"path\",attrs:{d:\"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z\",fill:e}},{tag:\"path\",attrs:{d:\"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z\",fill:e}}]}},name:\"crown\",theme:\"twotone\"},z=n(\"6VBw\"),J=function(e,t){return o.createElement(z.a,Object.assign({},e,{ref:t,icon:H}))};J.displayName=\"CrownTwoTone\";var V=o.forwardRef(J),q=n(\"BvKs\"),W=n(\"jsC+\"),Y=n(\"NsEo\"),K=(n(\"iZf9\"),i.a.createElement);function X(e){var t=e.data,n=e.showTimestamp,r=e.isOwner,a=e.canDelete,o=e.onDelete,i=R()(t.timestamp).format(\"LLLL\"),s=K(q.a,null,K(q.a.Item,{onClick:o},K(\"a\",null,\"delete\")));return K(\"div\",{className:Object(Y.a)(e)},t.text&&!t.isSystem&&K(\"div\",{className:\"bubble-container\"},K(\"div\",{className:\"bubble\",title:i},a&&K(W.a,{overlay:s,placement:\"topRight\"},K(\"span\",null,K(G.a,null),\" \")),t.senderInfo&&K(\"span\",{className:\"u-name\"},r&&K(V,{twoToneColor:\"#eb2f96\"}),t.senderInfo.username,\"tip\"!==t.type?\": \":\" \"),!t.imageUrl&&t.text,\" \",t.imageUrl&&K(\"a\",{title:\"Click to view full content\",href:-1===t.imageUrl.indexOf(\"http\")?\"#\":t.imageUrl,target:\"_blank\",rel:\"noreferrer\"},K(\"img\",{src:t.imageUrl,width:\"180px\",alt:\"\"})))),t.text&&t.isSystem&&K(\"p\",{style:{textAlign:\"center\",fontSize:\"14px\"}},t.text),n&&!t.isSystem&&K(\"div\",{className:\"timestamp\"},i))}var Q=i.a.createElement;function Z(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var $=function(e){Object(u.a)(n,e);var t=Z(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(y.a)(Object(g.a)(e),\"messagesRef\",void 0),Object(y.a)(Object(g.a)(e),\"state\",{page:1,onloadmore:!1}),Object(y.a)(Object(g.a)(e),\"onbeforeunload\",(function(){var t=e.props,n=t.conversation,r=t.resetStreamMessage;n&&n._id&&r()})),Object(y.a)(Object(g.a)(e),\"onMessage\",(function(t,n){var r=e.props,a=r.receiveStreamMessageSuccess,o=r.deleteMessageSuccess;t&&(\"created\"===n&&a(t),\"deleted\"===n&&o(t))})),Object(y.a)(Object(g.a)(e),\"onDelete\",(function(t){var n=e.props.deleteMessage;t&&n({messageId:t})})),Object(y.a)(Object(g.a)(e),\"renderMessages\",(function(){var t=e.props,n=t.message,r=t.currentUser,a=t.currentPerformer,o=t.conversation,s=t.loggedIn,c=n.items,u=n.fetching,l=0,d=c&&c.length;if(!c.length&&!u){var f=s?\"There are no chat!\":Q(i.a.Fragment,null,\"There are no chat, please\",Q(S.a,{href:\"/auth/register\"},Q(\"a\",null,\" register \")),\"or\",Q(S.a,{href:\"/auth/login\"},Q(\"a\",null,\" login \")),\"to send message!\");return Q(X,{data:{isSystem:!0,text:f}})}for(var p=[];l<d;){var b=c[l-1],h=c[l],v=c[l+1],m=r&&r._id?r._id:a&&a._id?a._id:null,O=h.senderId===m,y=R()(h.createdAt),E=!0,j=!0,_=!0,M=o&&o.performerId===h.senderId,C=!h.isDeleted&&a&&a._id===o.performerId||!h.isDeleted&&r._id===h.senderId||!h.isDeleted&&r.roles&&r.roles.includes(\"admin\");if(b){var P=R()(b.createdAt),T=R.a.duration(y.diff(P));b.senderId===h.senderId&&T.as(\"hours\")<1&&(E=!1),T.as(\"hours\")<1&&(_=!1)}if(v){var w=R()(v.createdAt),I=R.a.duration(w.diff(y));v.senderId===h.senderId&&I.as(\"hours\")<1&&(j=!1)}h._id&&p.push(Q(X,{onDelete:e.onDelete.bind(Object(g.a)(e),h._id),canDelete:C,isOwner:M,key:l,isMine:O,startsSequence:E,endsSequence:j,showTimestamp:_,data:h})),l+=1}return e.scrollToBottom(),p})),Object(y.a)(Object(g.a)(e),\"rejoin\",(function(){var t=e.props.conversation;if(t&&t._id){var n=e.context;\"stream_public\"===t.type&&n.emit(\"public-stream/rejoin\",{conversationId:t._id}),(\"stream_group\"===t.type||\"stream_private\"===t.type)&&n.emit(\"REJOIN_ROOM\",{conversationId:t._id})}})),e}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,n,r=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messagesRef||(this.messagesRef=Object(o.createRef)()),t=this.props.conversation,n=this.context,t&&t._id&&(n&&n.on&&n.on(\"message_created_conversation_\".concat(t._id),(function(e){r.onMessage(e,\"created\")})),n&&n.on&&n.on(\"message_deleted_conversation_\".concat(t._id),(function(e){r.onMessage(e,\"deleted\")}))),C.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload),this.reconnect();case 7:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"componentWillUnmount\",value:function(){var e=this.props.conversation,t=this.context;t&&t.off(\"message_created_conversation_\".concat(e._id)),t&&t.off(\"message_deleted_conversation_\".concat(e._id)),t&&t.off(\"reconnect\",this.rejoin),C.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload)}},{key:\"handleScroll\",value:function(){var e=Object(O.a)(m.a.mark((function e(t,n){var r,a,o,i,s,c,u,l,d,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.message,o=r.isPublic,i=r.loadMoreStreamMessages,s=this.state.page,c=a.fetching,u=a.items,l=a.total,d=l>u.length,f=n.target,d){e.next=7;break}return e.abrupt(\"return\");case 7:if(0!==f.scrollTop||!t._id||c||!d){e.next=11;break}return e.next=10,this.setState({page:s+1,onloadmore:!0});case 10:i({conversationId:t._id,type:t.type,limit:25,offset:25*s,isPublic:o});case 11:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"scrollToBottom\",value:function(){if(!this.state.onloadmore&&this.messagesRef&&this.messagesRef.current){var e=this.messagesRef.current;window.setTimeout((function(){e.scroll({top:e.scrollHeight,behavior:\"smooth\"})}),200)}}},{key:\"reconnect\",value:function(){var e=this.context;e&&e.on(\"reconnect\",this.rejoin)}},{key:\"render\",value:function(){var e=this.props,t=e.conversation,n=e.isPublic,r=e.message.fetching;return this.messagesRef||(this.messagesRef=Object(o.createRef)()),Q(\"div\",{className:\"message-list\",onScroll:this.handleScroll.bind(this,t)},t&&t._id&&Q(i.a.Fragment,null,Q(\"div\",{className:\"message-list-container\",ref:this.messagesRef},r&&Q(\"p\",{className:\"text-center\"},\"fetching...\"),this.renderMessages()),Q(F,{conversation:t,isPublic:n})))}}]),n}(o.PureComponent);$.contextType=_.c;var ee={loadMoreStreamMessages:h.f,receiveStreamMessageSuccess:h.j,deleteMessage:h.a,deleteMessageSuccess:h.b,resetStreamMessage:h.l},te=Object(b.b)((function(e){var t=e.streamMessage,n=t.conversationMap,r=t.activeConversation;return{message:{items:r.data&&n[r.data._id]&&n[r.data._id].items||[],total:r.data&&n[r.data._id]&&n[r.data._id].total||0,fetching:r.data&&n[r.data._id]&&n[r.data._id].fetching||!1},conversation:r.data,currentUser:e.user.current,currentPerformer:e.performer.current,loggedIn:e.auth.loggedIn}}),ee)($),ne=i.a.createElement;function re(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ae=function(e){Object(u.a)(n,e);var t=re(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.streamId,n=e.activeConversation,r=e.getStreamConversation;!n&&t&&r({conversation:n.data,isPublic:!0})}},{key:\"render\",value:function(){var e=this.props,t=e.activeConversation,n=e.isPublic,r=e.loggedIn;return ne(\"div\",{className:p()(\"message-stream\",r?\"user-logged-in\":\"\")},t&&t.data&&t.data.streamId?ne(te,{isPublic:n}):ne(\"p\",null,\"No conversation found.\"))}}]),n}(o.PureComponent),oe={getStreamConversation:h.d},ie=Object(b.b)((function(e){return{activeConversation:e.streamMessage.activeConversation,loggedIn:e.auth.loggedIn}}),oe)(ae),se={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z\"}}]},name:\"stop\",theme:\"outlined\"},ce=function(e,t){return o.createElement(z.a,Object.assign({},e,{ref:t,icon:se}))};ce.displayName=\"StopOutlined\";var ue=o.forwardRef(ce),le=n(\"8Skl\"),de=n(\"EC5a\"),fe=o.createElement,pe=Object(b.b)((function(e){return{placeholderAvatarUrl:e.ui.placeholderAvatarUrl}}))((function(e){var t=e.loggedIn,n=e.members,r=e.currentPerformer,a=e.placeholderAvatarUrl,i=o.useCallback(function(){var e=Object(O.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.key,window.confirm(\"Are you sure to block this user?\")){e.next=3;break}return e.abrupt(\"return\");case 3:return e.prev=3,e.next=6,de.b.geoBlock({userIds:[n]});case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,Promise.resolve(e.t0);case 12:r=e.sent,P.b.error(Object(Y.h)(r));case 14:case\"end\":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return fe(\"div\",{className:\"conversation-users\"},fe(\"div\",{className:\"users\"},n.length>0&&n.map((function(e){return fe(\"div\",{className:\"user\",key:e._id},t&&r&&r._id?fe(W.a,{overlay:fe(q.a,null,fe(q.a.Item,{onClick:i,key:e._id},fe(\"span\",null,fe(ue,{size:16}),\" \",\"Block this user\"))),placement:\"bottomLeft\",trigger:[\"hover\",\"click\"]},fe(\"span\",{className:\"username\"},fe(\"img\",{alt:\"avatar\",src:(null===e||void 0===e?void 0:e.avatar)||a,width:\"35px\",style:{borderRadius:\"50%\",marginRight:\"5px\"}}),e.username,\" \",fe(le.a,null))):fe(\"span\",{className:\"username\"},fe(\"img\",{alt:\"avatar\",src:(null===e||void 0===e?void 0:e.avatar)||\"/default-user-icon.png\",width:\"35px\",style:{borderRadius:\"50%\",marginRight:\"5px\"}}),e.username))}))))})),be=(n(\"VUsV\"),i.a.createElement),he=function(e){var t=e.isPublic,n=e.activeConversation,r=e.totalParticipant,o=e.currentPerformer,i=e.loggedIn,s=e.members;return be(\"div\",{className:\"conversation-stream\"},be(a.a,{defaultActiveKey:\"chat_content\"},be(a.a.TabPane,{tab:\"CHAT\",key:\"chat_content\"},n&&n.data&&n.data.streamId&&be(ie,{isPublic:t,streamId:n.data.streamId})),be(a.a.TabPane,{tab:\"USER (\".concat(r||0,\")\"),key:\"chat_user\"},be(pe,{currentPerformer:o,loggedIn:i,members:s}))))};he.defaultProps={isPublic:!1,totalParticipant:0,activeConversation:null,currentPerformer:null,loggedIn:!1,members:[]};t.a=he},MoJi:function(e,t,n){\"use strict\";var r;n.d(t,\"a\",(function(){return r})),function(e){e.INITIALIZED=\"initialized\",e.AVAILABLE_DEVICES=\"available_devices\",e.PUBLISH_STARTED=\"publish_started\",e.PUBLISH_FINISHED=\"publish_finished\",e.SCREEN_SHARE_EXTENSION_AVAILABLE=\"screen_share_extension_available\",e.SCREEN_SHARE_STOPPED=\"screen_share_stopped\",e.CLOSED=\"closed\",e.PONG=\"pong\",e.REFRESH_CONNECTION=\"refreshConnection\",e.ICE_CONNECTION_STATE_CHANGED=\"ice_connection_state_changed\",e.UPDATED_STATS=\"updated_stats\",e.PLAY_FINISHED=\"play_finished\",e.PLAY_STARTED=\"play_started\",e.JOINED_THE_ROOM=\"joinedTheRoom\",e.STREAM_JOINED=\"streamJoined\",e.NEW_STREAM_AVAILABLE=\"newStreamAvailable\",e.STREAM_LEAVED=\"streamLeaved\",e.LEAVED_FROM_ROOM=\"leavedFromRoom\",e.STREAM_INFORMATION=\"streamInformation\"}(r||(r={}))},P80f:function(e,t,n){\"use strict\";var r=n(\"ODXe\"),a=n(\"q1tI\"),o=n(\"R3zJ\");t.a=function(){var e=a.useState(!1),t=Object(r.a)(e,2),n=t[0],i=t[1];return a.useEffect((function(){i(Object(o.b)())}),[]),n}},R3zJ:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return o})),n.d(t,\"b\",(function(){return i}));var r,a=n(\"MNnm\"),o=function(){return Object(a.a)()&&window.document.documentElement},i=function(){if(!o())return!1;if(void 0!==r)return r;var e=document.createElement(\"div\");return e.style.display=\"flex\",e.style.flexDirection=\"column\",e.style.rowGap=\"1px\",e.appendChild(document.createElement(\"div\")),e.appendChild(document.createElement(\"div\")),document.body.appendChild(e),r=1===e.scrollHeight,document.body.removeChild(e),r}},ReuC:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return a}));var r=n(\"foSv\");function a(e,t,n){return(a=\"undefined\"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},WT8E:function(e,t,n){\"use strict\";n.d(t,\"w\",(function(){return o})),n.d(t,\"y\",(function(){return i})),n.d(t,\"x\",(function(){return s})),n.d(t,\"H\",(function(){return u})),n.d(t,\"J\",(function(){return l})),n.d(t,\"I\",(function(){return d})),n.d(t,\"Q\",(function(){return f})),n.d(t,\"db\",(function(){return b})),n.d(t,\"fb\",(function(){return h})),n.d(t,\"eb\",(function(){return v})),n.d(t,\"U\",(function(){return m})),n.d(t,\"ab\",(function(){return O})),n.d(t,\"Y\",(function(){return g})),n.d(t,\"Z\",(function(){return y})),n.d(t,\"V\",(function(){return E})),n.d(t,\"gb\",(function(){return R})),n.d(t,\"X\",(function(){return j})),n.d(t,\"z\",(function(){return _})),n.d(t,\"B\",(function(){return M})),n.d(t,\"A\",(function(){return C})),n.d(t,\"O\",(function(){return P})),n.d(t,\"P\",(function(){return T})),n.d(t,\"bb\",(function(){return w})),n.d(t,\"K\",(function(){return I})),n.d(t,\"n\",(function(){return x})),n.d(t,\"p\",(function(){return k})),n.d(t,\"o\",(function(){return N})),n.d(t,\"M\",(function(){return L})),n.d(t,\"c\",(function(){return D})),n.d(t,\"E\",(function(){return U})),n.d(t,\"e\",(function(){return F})),n.d(t,\"g\",(function(){return G})),n.d(t,\"f\",(function(){return H})),n.d(t,\"L\",(function(){return z})),n.d(t,\"t\",(function(){return V})),n.d(t,\"v\",(function(){return q})),n.d(t,\"u\",(function(){return W})),n.d(t,\"N\",(function(){return Y})),n.d(t,\"G\",(function(){return K})),n.d(t,\"q\",(function(){return Q})),n.d(t,\"s\",(function(){return Z})),n.d(t,\"r\",(function(){return $})),n.d(t,\"T\",(function(){return ee})),n.d(t,\"d\",(function(){return te})),n.d(t,\"F\",(function(){return ne})),n.d(t,\"k\",(function(){return ae})),n.d(t,\"m\",(function(){return oe})),n.d(t,\"l\",(function(){return ie})),n.d(t,\"S\",(function(){return se})),n.d(t,\"b\",(function(){return ce})),n.d(t,\"D\",(function(){return ue})),n.d(t,\"h\",(function(){return de})),n.d(t,\"j\",(function(){return fe})),n.d(t,\"i\",(function(){return pe})),n.d(t,\"R\",(function(){return be})),n.d(t,\"a\",(function(){return he})),n.d(t,\"C\",(function(){return ve})),n.d(t,\"W\",(function(){return me})),n.d(t,\"cb\",(function(){return Oe}));var r=n(\"vo7w\"),a=Object(r.b)(\"getPerformerCategories\",\"GET_PERFORMER_CATEGORIES\"),o=a.getPerformerCategories,i=a.getPerformerCategoriesSuccess,s=a.getPerformerCategoriesFail,c=Object(r.b)(\"searchPerformer\",\"SEARCH_PERFORMER\"),u=c.searchPerformer,l=c.searchPerformerSuccess,d=c.searchPerformerFail,f=Object(r.a)(\"SET_PERFORMER_SEARCHING\"),p=Object(r.b)(\"updatePerformerProfile\",\"UPDATE_PERFORMER_PROFILE\"),b=p.updatePerformerProfile,h=p.updatePerformerProfileSuccess,v=p.updatePerformerProfileFail,m=Object(r.a)(\"updatingPerformerProfile\"),O=Object(r.a)(\"UPDATE_PAYMENT_INFO\"),g=Object(r.a)(\"UPDATE_DIRECT_DEPOSIT\"),y=Object(r.a)(\"UPDATE_PAXUM\"),E=Object(r.a)(\"UPDATE_BITPAY\"),R=Object(r.a)(\"UPDATE_STREAMING_STATUS\"),j=Object(r.a)(\"UPDATE_DEFAULT_PRICE\"),S=Object(r.b)(\"getPerformerDetails\",\"GET_PERFORMER_DETAILS\"),_=S.getPerformerDetails,M=S.getPerformerDetailsSuccess,C=S.getPerformerDetailsFail,P=Object(r.a)(\"setGettingPerformerDetails\"),T=Object(r.a)(\"SET_PERFORMER_DETAILS\"),w=Object(r.a)(\"UPDATE_PERFORMER_ASSET\"),I=Object(r.a)(\"SET_FAVORITE_PERFORMER_DETAILS\"),A=Object(r.b)(\"getMyProducts\",\"GET_MY_PRODUCT\"),x=A.getMyProducts,k=A.getMyProductsSuccess,N=A.getMyProductsFail,L=Object(r.a)(\"setGettingMyProducts\"),D=Object(r.a)(\"addMyProduct\"),U=Object(r.a)(\"removeMyProduct\"),B=Object(r.b)(\"getEarning\",\"GET_EARNING\"),F=B.getEarning,G=B.getEarningSuccess,H=B.getEarningFail,z=Object(r.a)(\"SET_GETTING_EARNIG\"),J=Object(r.b)(\"getPayoutRequest\",\"GET_PAYOUT_REQUEST\"),V=J.getPayoutRequest,q=J.getPayoutRequestSuccess,W=J.getPayoutRequestFail,Y=Object(r.a)(\"SET_GETTING_PAYOUT_REQUEST\"),K=Object(r.a)(\"REMOVE_PAYOUT_REQUEST\"),X=Object(r.b)(\"getMyVideos\",\"GET_MY_VIDEO\"),Q=X.getMyVideos,Z=X.getMyVideosSuccess,$=X.getMyVideosFail,ee=Object(r.a)(\"setgettingMyVideos\"),te=Object(r.a)(\"addMyVideos\"),ne=Object(r.a)(\"removeMyVideo\"),re=Object(r.b)(\"getMyPhotos\",\"GET_MY_PHOTO\"),ae=re.getMyPhotos,oe=re.getMyPhotosSuccess,ie=re.getMyPhotosFail,se=Object(r.a)(\"setgettingMyPhotos\"),ce=Object(r.a)(\"addMyPhotos\"),ue=Object(r.a)(\"removeMyPhoto\"),le=Object(r.b)(\"getMyGalleries\",\"GET_MY_GALLERIES\"),de=le.getMyGalleries,fe=le.getMyGalleriesSuccess,pe=le.getMyGalleriesFail,be=Object(r.a)(\"setgettingMyGalleries\"),he=Object(r.a)(\"addMyGalleries\"),ve=Object(r.a)(\"removeMyGalleries\"),me=Object(r.a)(\"updateCurrentPerformer\"),Oe=Object(r.a)(\"UPDATE_PERFORMER_FAVOURITE\")},XBQK:function(e,t,n){\"use strict\";var r=n(\"wx14\"),a=n(\"rePB\"),o=n(\"q1tI\"),i=n(\"eDIo\"),s=n(\"TSYQ\"),c=n.n(s),u=n(\"UESt\"),l=n(\"ODXe\"),d=n(\"GZ0F\"),f=n(\"2/Rp\"),p=n(\"H84U\"),b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=f.a.Group,v=function(e){var t=o.useContext(p.b),n=t.getPopupContainer,a=t.getPrefixCls,i=t.direction,s=e.prefixCls,u=e.type,v=e.disabled,m=e.onClick,O=e.htmlType,g=e.children,y=e.className,E=e.overlay,j=e.trigger,S=e.align,_=e.visible,M=e.onVisibleChange,C=e.placement,P=e.getPopupContainer,T=e.href,w=e.icon,I=void 0===w?o.createElement(d.a,null):w,A=e.title,x=e.buttonsRender,k=e.mouseEnterDelay,N=e.mouseLeaveDelay,L=e.overlayClassName,D=e.overlayStyle,U=b(e,[\"prefixCls\",\"type\",\"disabled\",\"onClick\",\"htmlType\",\"children\",\"className\",\"overlay\",\"trigger\",\"align\",\"visible\",\"onVisibleChange\",\"placement\",\"getPopupContainer\",\"href\",\"icon\",\"title\",\"buttonsRender\",\"mouseEnterDelay\",\"mouseLeaveDelay\",\"overlayClassName\",\"overlayStyle\"]),B=a(\"dropdown-button\",s),F={align:S,overlay:E,disabled:v,trigger:v?[]:j,onVisibleChange:M,getPopupContainer:P||n,mouseEnterDelay:k,mouseLeaveDelay:N,overlayClassName:L,overlayStyle:D};\"visible\"in e&&(F.visible=_),F.placement=\"placement\"in e?C:\"rtl\"===i?\"bottomLeft\":\"bottomRight\";var G=x([o.createElement(f.a,{type:u,disabled:v,onClick:m,htmlType:O,href:T,title:A},g),o.createElement(f.a,{type:u,icon:I})]),H=Object(l.a)(G,2),z=H[0],J=H[1];return o.createElement(h,Object(r.a)({},U,{className:c()(B,y)}),z,o.createElement(R,F,J))};v.__ANT_BUTTON=!0,v.defaultProps={type:\"default\",buttonsRender:function(e){return e}};var m=v,O=n(\"uaoM\"),g=n(\"CWQg\"),y=n(\"0n0R\"),E=(Object(g.a)(\"topLeft\",\"topCenter\",\"topRight\",\"bottomLeft\",\"bottomCenter\",\"bottomRight\"),function(e){var t,n=o.useContext(p.b),s=n.getPopupContainer,l=n.getPrefixCls,d=n.direction,f=e.arrow,b=e.prefixCls,h=e.children,v=e.trigger,m=e.disabled,g=e.getPopupContainer,E=e.overlayClassName,R=l(\"dropdown\",b),j=o.Children.only(h),S=Object(y.a)(j,{className:c()(\"\".concat(R,\"-trigger\"),Object(a.a)({},\"\".concat(R,\"-rtl\"),\"rtl\"===d),j.props.className),disabled:m}),_=c()(E,Object(a.a)({},\"\".concat(R,\"-rtl\"),\"rtl\"===d)),M=m?[]:v;return M&&-1!==M.indexOf(\"contextMenu\")&&(t=!0),o.createElement(i.a,Object(r.a)({arrow:f,alignPoint:t},e,{overlayClassName:_,prefixCls:R,getPopupContainer:g||s,transitionName:function(){var t=l(),n=e.placement,r=void 0===n?\"\":n,a=e.transitionName;return void 0!==a?a:r.indexOf(\"top\")>=0?\"\".concat(t,\"-slide-down\"):\"\".concat(t,\"-slide-up\")}(),trigger:M,overlay:function(){return function(t){var n,r=e.overlay;n=\"function\"===typeof r?r():r;var a=(n=o.Children.only(\"string\"===typeof n?o.createElement(\"span\",null,n):n)).props;Object(O.a)(!a.mode||\"vertical\"===a.mode,\"Dropdown\",'mode=\"'.concat(a.mode,\"\\\" is not supported for Dropdown's Menu.\"));var i=a.selectable,s=void 0!==i&&i,c=a.expandIcon,l=\"undefined\"!==typeof c&&o.isValidElement(c)?c:o.createElement(\"span\",{className:\"\".concat(t,\"-menu-submenu-arrow\")},o.createElement(u.a,{className:\"\".concat(t,\"-menu-submenu-arrow-icon\")}));return\"string\"===typeof n.type?n:Object(y.a)(n,{mode:\"vertical\",selectable:s,expandIcon:l})}(R)},placement:function(){var t=e.placement;return void 0!==t?t:\"rtl\"===d?\"bottomRight\":\"bottomLeft\"}()}),S)});E.Button=m,E.defaultProps={mouseEnterDelay:.15,mouseLeaveDelay:.1};var R=t.a=E},YFqc:function(e,t,n){e.exports=n(\"cTJO\")},bEyJ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/live\",function(){return n(\"u02R\")}])},cTJO:function(e,t,n){\"use strict\";var r=n(\"zoAU\"),a=n(\"7KCV\");t.__esModule=!0,t.default=void 0;var o,i=a(n(\"q1tI\")),s=n(\"elyg\"),c=n(\"nOHt\"),u=new Map,l=window.IntersectionObserver,d={};var f=function(e,t){var n=o||(l?o=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(o.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:\"200px\"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,r){(0,s.isLocalURL)(t)&&(e.prefetch(t,n,r).catch((function(e){0})),d[t+\"%\"+n]=!0)}var b=function(e){var t=!1!==e.prefetch,n=i.default.useState(),a=r(n,2),o=a[0],u=a[1],b=(0,c.useRouter)(),h=b&&b.pathname||\"/\",v=i.default.useMemo((function(){var t=(0,s.resolveHref)(h,e.href,!0),n=r(t,2),a=n[0],o=n[1];return{href:a,as:e.as?(0,s.resolveHref)(h,e.as):o||a}}),[h,e.href,e.as]),m=v.href,O=v.as;i.default.useEffect((function(){if(t&&l&&o&&o.tagName&&(0,s.isLocalURL)(m)&&!d[m+\"%\"+O])return f(o,(function(){p(b,m,O)}))}),[t,o,m,O,b]);var g=e.children,y=e.replace,E=e.shallow,R=e.scroll;\"string\"===typeof g&&(g=i.default.createElement(\"a\",null,g));var j=i.Children.only(g),S={ref:function(e){e&&u(e),j&&\"object\"===typeof j&&j.ref&&(\"function\"===typeof j.ref?j.ref(e):\"object\"===typeof j.ref&&(j.ref.current=e))},onClick:function(e){j.props&&\"function\"===typeof j.props.onClick&&j.props.onClick(e),e.defaultPrevented||function(e,t,n,r,a,o,i){(\"A\"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&\"_self\"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,s.isLocalURL)(n))&&(e.preventDefault(),null==i&&(i=r.indexOf(\"#\")<0),t[a?\"replace\":\"push\"](n,r,{shallow:o}).then((function(e){e&&i&&(window.scrollTo(0,0),document.body.focus())})))}(e,b,m,O,y,E,R)}};return t&&(S.onMouseEnter=function(e){(0,s.isLocalURL)(m)&&(j.props&&\"function\"===typeof j.props.onMouseEnter&&j.props.onMouseEnter(e),p(b,m,O,{priority:!0}))}),(e.passHref||\"a\"===j.type&&!(\"href\"in j.props))&&(S.href=(0,s.addBasePath)((0,s.addLocale)(O,b&&b.locale,b&&b.defaultLocale))),i.default.cloneElement(j,S)};t.default=b},fsrY:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r}));var r={SITE_NAME:\"siteName\",LOGO_URL:\"logoUrl\",BANNER_URL:\"bannerUrl\",PLACEHOLDER_LOGIN_URL:\"placeholderLoginUrl\",PLACEHOLDER_AVATAR_URL:\"placeholderAvatarUrl\",FAVICON:\"favicon\",META_KEYWORDS:\"metaKeywords\",META_DESCRIPTION:\"metaDescription\",HEADER_SCRIPT:\"headerScript\",AFTER_BODY_SCRIPT:\"afterBodyScript\",CURRENCY:\"currency\",GOOGLE_ANALYTICS_CODE:\"gaCode\",MAINTENANCE_MODE:\"maintenanceMode\",TIP_SOUND:\"tipSound\",DEFAULT_OFFLINE_MODEL_IMAGE:\"defaultOfflineModelImage\",DEFAULT_MODEL_PRIVATECALL_WITH_USER_IMAGE:\"defaultPrivateCallImage\",DEFAULT_MODEL_IN_GROUP_CHAT_IMAGE:\"defaultGroupChatImage\",VIEWER_URL:\"viewerURL\",PUBLISHER_URL:\"publisherURL\",SUBSCRIBER_URL:\"subscriberUrl\",OPTION_FOR_BROADCAST:\"optionForBroadcast\",OPTION_FOR_PRIVATE:\"optionForPrivate\",OPTION_FOR_GROUP:\"optionForGroup\",SECURE_OPTION:\"secureOption\",ANT_MEDIA_APPNAME:\"AntMediaAppname\"}},gxiY:function(e,t,n){\"use strict\";n.d(t,\"d\",(function(){return o})),n.d(t,\"e\",(function(){return i})),n.d(t,\"m\",(function(){return c})),n.d(t,\"o\",(function(){return u})),n.d(t,\"n\",(function(){return l})),n.d(t,\"j\",(function(){return d})),n.d(t,\"h\",(function(){return p})),n.d(t,\"i\",(function(){return b})),n.d(t,\"f\",(function(){return v})),n.d(t,\"g\",(function(){return m})),n.d(t,\"c\",(function(){return O})),n.d(t,\"l\",(function(){return g})),n.d(t,\"k\",(function(){return y})),n.d(t,\"a\",(function(){return R})),n.d(t,\"b\",(function(){return j}));var r=n(\"vo7w\"),a=Object(r.b)(\"getStreamConversation\",\"GET_STREAM_CONVERSATION\"),o=a.getStreamConversation,i=a.getStreamConversationSuccess,s=(a.getStreamConversationFail,Object(r.b)(\"sendStreamMessage\",\"SEND_STREAM_MESSAGE\")),c=s.sendStreamMessage,u=s.sendStreamMessageSuccess,l=s.sendStreamMessageFail,d=Object(r.b)(\"receiveStreamMessageSuccess\",\"RECEIVE_STREAM_MESSAGE_SUCCESS\").receiveStreamMessageSuccess,f=Object(r.b)(\"loadStreamMessages\",\"LOAD_STREAM_MESSAGES\"),p=f.loadStreamMessages,b=f.loadStreamMessagesSuccess,h=(f.loadStreamMessagesFail,Object(r.b)(\"loadMoreStreamMessages\",\"LOAD_MORE_STREAM_MESSAGES\")),v=h.loadMoreStreamMessages,m=h.loadMoreStreamMessagesSuccess,O=(h.loadMoreStreamMessagesFail,Object(r.a)(\"fetchingStreamMessage\")),g=Object(r.a)(\"resetStreamMessage\"),y=Object(r.a)(\"resetAllStreamMessage\"),E=Object(r.b)(\"deleteMessage\",\"DELETE_MESSAGE\"),R=E.deleteMessage,j=E.deleteMessageSuccess;E.deleteMessageFail},\"jsC+\":function(e,t,n){\"use strict\";var r=n(\"XBQK\");t.a=r.a},kPKH:function(e,t,n){\"use strict\";var r=n(\"/kpp\");t.a=r.a},\"o/2+\":function(e,t,n){\"use strict\";var r=n(\"q1tI\"),a=Object(r.createContext)({});t.a=a},qrJ5:function(e,t,n){\"use strict\";var r=n(\"wx14\"),a=n(\"rePB\"),o=n(\"U8pU\"),i=n(\"ODXe\"),s=n(\"q1tI\"),c=n(\"TSYQ\"),u=n.n(c),l=n(\"H84U\"),d=n(\"o/2+\"),f=n(\"CWQg\"),p=n(\"ACnJ\"),b=n(\"P80f\"),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},v=(Object(f.a)(\"top\",\"middle\",\"bottom\",\"stretch\"),Object(f.a)(\"start\",\"end\",\"center\",\"space-around\",\"space-between\"),s.forwardRef((function(e,t){var n,c=e.prefixCls,f=e.justify,v=e.align,m=e.className,O=e.style,g=e.children,y=e.gutter,E=void 0===y?0:y,R=e.wrap,j=h(e,[\"prefixCls\",\"justify\",\"align\",\"className\",\"style\",\"children\",\"gutter\",\"wrap\"]),S=s.useContext(l.b),_=S.getPrefixCls,M=S.direction,C=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),P=Object(i.a)(C,2),T=P[0],w=P[1],I=Object(b.a)(),A=s.useRef(E);s.useEffect((function(){var e=p.a.subscribe((function(e){var t=A.current||0;(!Array.isArray(t)&&\"object\"===Object(o.a)(t)||Array.isArray(t)&&(\"object\"===Object(o.a)(t[0])||\"object\"===Object(o.a)(t[1])))&&w(e)}));return function(){return p.a.unsubscribe(e)}}),[]);var x=_(\"row\",c),k=function(){var e=[0,0];return(Array.isArray(E)?E:[E,0]).forEach((function(t,n){if(\"object\"===Object(o.a)(t))for(var r=0;r<p.b.length;r++){var a=p.b[r];if(T[a]&&void 0!==t[a]){e[n]=t[a];break}}else e[n]=t||0})),e}(),N=u()(x,(n={},Object(a.a)(n,\"\".concat(x,\"-no-wrap\"),!1===R),Object(a.a)(n,\"\".concat(x,\"-\").concat(f),f),Object(a.a)(n,\"\".concat(x,\"-\").concat(v),v),Object(a.a)(n,\"\".concat(x,\"-rtl\"),\"rtl\"===M),n),m),L={},D=k[0]>0?k[0]/-2:void 0,U=k[1]>0?k[1]/-2:void 0;if(D&&(L.marginLeft=D,L.marginRight=D),I){var B=Object(i.a)(k,2);L.rowGap=B[1]}else U&&(L.marginTop=U,L.marginBottom=U);var F=s.useMemo((function(){return{gutter:k,wrap:R,supportFlexGap:I}}),[k,R,I]);return s.createElement(d.a.Provider,{value:F},s.createElement(\"div\",Object(r.a)({},j,{className:N,style:Object(r.a)(Object(r.a)({},L),O),ref:t}),g))})));v.displayName=\"Row\",t.a=v},u02R:function(e,t,n){\"use strict\";n.r(t);var r=n(\"wx14\"),a=n(\"o0o1\"),o=n.n(a),i=n(\"HaE+\"),s=n(\"1OyB\"),c=n(\"vuIU\"),u=n(\"JX7q\"),l=n(\"Ji7U\"),d=n(\"md7G\"),f=n(\"foSv\"),p=n(\"rePB\"),b=n(\"q1tI\"),h=n.n(b),v=n(\"8Kt/\"),m=n.n(v),O=n(\"tsqr\"),g=n(\"BMrR\"),y=n(\"kPKH\"),E=n(\"2/Rp\"),R=n(\"/MKj\"),j=n(\"CLrh\"),S=n(\"HQdG\"),_=n(\"KrTs\"),M=n(\"NsEo\"),C=n(\"8OJ3\"),P=n(\"KSuR\"),T=(n(\"LJzH\"),n(\"MoJi\")),w=n(\"nOHt\"),I=n.n(w),A=h.a.createElement;function x(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var k,N=function(e){Object(l.a)(n,e);var t=x(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(p.a)(Object(u.a)(r),\"publisher\",void 0),Object(p.a)(Object(u.a)(r),\"onbeforeunload\",(function(){r.publisher&&(r.publisher.dispose(),r.publisher=void 0)})),r.state={streamId:\"\"},r}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){C.a.registerPlugin(\"webRTCMicControlsPlugin\",P.a),I.a.events.on(\"routeChangeStart\",this.onbeforeunload),window.addEventListener(\"beforeunload\",this.onbeforeunload)}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),I.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handlePublishing\",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.webRTCAdaptor,a=n.leaveSession,i=n.settings,e.prev=1,e.next=4,j.r.getPublishToken({streamId:t,settings:i});case 4:s=e.sent,r.publish(t,s),e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(1),e.next=12,Promise.resolve(e.t0);case 12:c=e.sent,O.b.error(Object(M.h)(c)),a();case 15:case\"end\":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"publish\",value:function(e){var t=this.props.initialized;this.setState({streamId:e}),t&&this.handlePublishing(e)}},{key:\"start\",value:function(){var e=this.props,t=e.initWebRTCAdaptor,n=e.initialized,r=e.publish_started,a=this.state.streamId;n&&!r&&a&&this.handlePublishing(a),t(this.handelWebRTCAdaptorCallback.bind(this))}},{key:\"handelWebRTCAdaptorCallback\",value:function(e){var t=this,n=this.props,r=n.muteLocalMic,a=n.unmuteLocalMic;if(e===T.a.PUBLISH_STARTED){var o=Object(C.a)(\"publisher\",{liveui:!0,controls:!0,muted:!0,controlBar:{playToggle:!1,currentTimeDisplay:!1,fullscreenToggle:!1,pictureInPictureToggle:!1,volumePanel:!1}});o.error(null),o.one(\"play\",(function(){t.publisher=o,t.publisher.webRTCMicControlsPlugin({muteLocalMic:r,unmuteLocalMic:a,isMicMuted:!1})}))}}},{key:\"stop\",value:function(){window.location.reload()}},{key:\"render\",value:function(){var e=this.props,t=e.initialized,n=e.publish_started,r={id:\"publisher\",className:\"video-js\",autoPlay:!0,muted:!0,controls:!1,playsInline:!0,style:{width:\"100%\"},hidden:!n};return A(\"div\",{style:{minHeight:300},className:\"text-center\"},t&&n&&A(E.a,{type:\"default\",onClick:this.stop.bind(this),block:!0,className:\"mb-10\"},\"Stop Streaming\"),A(\"video\",r),n&&A(_.a,{status:\"success\",text:A(\"span\",{className:\"badge-success publishing\"},\"Publishing\")}))}}]),n}(b.PureComponent),L=Object(S.a)(N),D=n(\"AY7M\"),U=n(\"gxiY\"),B=n(\"WT8E\"),F=n(\"L/eJ\"),G=n(\"ODXe\"),H=n(\"5rEg\"),z=h.a.createElement,J=function(e){var t=e.status,n=e.updating,r=e.submit,a=h.a.useState(t),o=Object(G.a)(a,2),i=o[0],s=o[1];return z(g.a,{gutter:{sm:10,xs:0}},z(y.a,{lg:20,md:18,sm:24,xs:24},z(H.a,{placeholder:\"Update your status\",value:i,onChange:function(e){return s(e.target.value)}})),z(y.a,{lg:4,md:6,sm:24,xs:24},z(E.a,{type:\"primary\",onClick:function(){r(i)},loading:n,className:\"mb-10\",block:!0,disabled:n},\"Update\")))},V=(n(\"jNaB\"),h.a.createElement);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}!function(e){e.ROOM_INFORMATIOM_CHANGED=\"public-room-changed\",e.USER_LEFT_ROOM=\"USER_LEFT_ROOM\"}(k||(k={}));var K=function(e){Object(l.a)(n,e);var t=Y(n);function n(e){var r;return Object(s.a)(this,n),r=t.call(this,e),Object(p.a)(Object(u.a)(r),\"publisherRef\",void 0),Object(p.a)(Object(u.a)(r),\"socket\",void 0),Object(p.a)(Object(u.a)(r),\"onbeforeunload\",(function(){r.leavePublicRoom()})),r.state={loading:!1,initialized:!1,publish_started:!1,sessionId:\"\",total:0,members:[]},r}return Object(c.a)(n,[{key:\"componentDidMount\",value:function(){this.socket=this.context,this.joinPublicRoom(),window.addEventListener(\"beforeunload\",this.onbeforeunload),I.a.events.on(\"routeChangeStart\",this.onbeforeunload)}},{key:\"componentDidUpdate\",value:function(e){var t=this.props,n=t.updateSuccess,r=t.updateError;e.updateSuccess!==n&&n&&O.b.success(\"Update Status Success.\"),e.updateError!==r&&r&&O.b.error(Object(M.h)(r))}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"beforeunload\",this.onbeforeunload),I.a.events.off(\"routeChangeStart\",this.onbeforeunload)}},{key:\"handler\",value:function(e){var t,n=e.total,r=e.members,a=e.conversationId,o=this.props.activeConversation;(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t._id)===a&&this.setState({total:n,members:r})}},{key:\"handleUpdateStatusForm\",value:function(e){(0,this.props.updateStreamingStatus)(e)}},{key:\"start\",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({loading:!0}),e.next=4,j.r.goLive();case 4:t=e.sent,n=t.data.sessionId,this.setState({sessionId:n}),this.publisherRef&&this.publisherRef.start(),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Promise.resolve(e.t0);case 14:r=e.sent,O.b.error(Object(M.h)(r));case 16:return e.prev=16,this.setState({loading:!1}),e.finish(16);case 19:case\"end\":return e.stop()}}),e,this,[[0,10,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:\"callback\",value:function(e){var t=this.props.activeConversation,n=this.state.sessionId;t&&t.data&&(this.socket=this.context,e===T.a.INITIALIZED?(this.setState({initialized:!0}),this.publisherRef&&this.publisherRef.publish(n)):e===T.a.PUBLISH_STARTED?(this.setState({publish_started:!0,loading:!1}),this.socket.emit(\"public-stream/live\",{conversationId:t.data._id})):e===T.a.PUBLISH_FINISHED?this.setState({loading:!1,publish_started:!1}):e===T.a.CLOSED&&this.setState({loading:!1,initialized:!1,publish_started:!1}))}},{key:\"joinPublicRoom\",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.loadStreamMessages,r=t.getStreamConversationSuccess,e.prev=1,this.setState({loading:!0}),e.next=5,j.r.goLive();case 5:a=e.sent,(i=a.data.conversation)&&i._id&&(r({data:i}),n({conversationId:i._id,limit:25,offset:0,type:i.type}),this.socket=this.context,this.socket&&this.socket.emit(\"public-stream/join\",{conversationId:i._id})),e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Promise.resolve(e.t0);case 14:s=e.sent,O.b.error(Object(M.h)(s));case 16:return e.prev=16,this.setState({loading:!1}),e.finish(16);case 19:case\"end\":return e.stop()}}),e,this,[[1,10,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:\"leavePublicRoom\",value:function(){var e=this.props,t=e.activeConversation,n=e.resetStreamMessage;if(this.socket&&t&&t.data){var r=W({},t.data);this.socket.emit(\"public-stream/leave\",{conversationId:r._id}),n()}}},{key:\"userLeftRoomHandle\",value:function(e){var t,n=e.username,r=e.conversationId,a=this.props.activeConversation;if((null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t._id)===r){var o=this.state,i=o.total,s=o.members;this.setState({total:i-1,members:s.filter((function(e){return e.username!==n}))})}}},{key:\"removeAllMessage\",value:function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.activeConversation,r=t.performer,a=t.resetAllStreamMessage,n.data&&r._id===n.data.performerId){e.next=3;break}return e.abrupt(\"return\");case 3:if(e.prev=3,window.confirm(\"Are you sure you want to remove chat history?\")){e.next=6;break}return e.abrupt(\"return\");case 6:return e.next=8,j.f.deleteAllMessageInConversation(n.data._id);case 8:a({conversationId:n.data._id}),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,Promise.resolve(e.t0);case 15:i=e.sent,O.b.error(Object(M.h)(i));case 17:case\"end\":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this,t=this.props,n=t.performer,a=t.activeConversation,o=t.updating,i=this.state,s=i.loading,c=i.initialized,u=i.publish_started,l=i.members,d=i.total;return V(h.a.Fragment,null,V(m.a,null,V(\"title\",null,\"Go Live\")),V(D.a,{event:k.ROOM_INFORMATIOM_CHANGED,handler:this.handler.bind(this)}),V(D.a,{event:k.USER_LEFT_ROOM,handler:this.userLeftRoomHandle.bind(this)}),V(g.a,null,V(y.a,{xs:24,sm:24,md:12},V(J,{status:n.streamingTitle,updating:o,submit:this.handleUpdateStatusForm.bind(this)}),(!c||!u)&&V(E.a,{type:\"primary\",onClick:this.start.bind(this),loading:s,block:!0},\"Start Streaming\"),V(L,Object(r.a)({},this.props,{participantId:n._id,ref:function(t){return e.publisherRef=t},callback:this.callback.bind(this),configs:{debug:!0,bandwidth:900,localVideoId:\"publisher\"}}))),V(y.a,{xs:24,sm:24,md:12},V(F.a,Object(r.a)({},this.props,{members:l,totalParticipant:d,currentPerformer:n})),(null===a||void 0===a?void 0:a.data)&&V(\"div\",{style:{margin:\"10px\"}},V(E.a,{type:\"primary\",onClick:this.removeAllMessage.bind(this)},\"Clear message history\")))))}}]),n}(b.PureComponent);Object(p.a)(K,\"authenticate\",!0),K.contextType=D.c;var X={updateStreamingStatus:B.gb,getStreamConversationSuccess:U.e,loadStreamMessages:U.h,resetStreamMessage:U.l,resetAllStreamMessage:U.k};t.default=Object(R.b)((function(e){return W(W({},e.streaming),{},{performer:e.performer.current,updating:e.performer.updating,updateSuccess:e.performer.updateSuccess,updateError:e.performer.updateError,activeConversation:e.streamMessage.activeConversation,loggedIn:e.auth.loggedIn})}),X)(K)}},[[\"bEyJ\",0,1,3,5,28,2,4,6,7,10,9,11,12,13,14,15,16,17,19,21,24,25,27,39,52,8]]]);","extractedComments":[]}